{"version":3,"sources":["../../src/lib/import-as.js"],"names":[],"mappings":"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","file":"lib/import-as.js","sourcesContent":["import { replaceRequire, advancedFromRe, getSrcFromMarkers, simpleFromRe } from '.'\n\nconst makeDefaultIf = (name) => {\n  const i = `if (${name} && ${name}.__esModule) ${name} = ${name}.default;`\n  return i\n}\n\nconst importRe = /^( *import\\s+(?:(.+?)\\s*,\\s*)?\\*\\s+as\\s+(.+?))/\nconst advancedRe = new RegExp(`${importRe.source}${advancedFromRe.source}`, 'gm')\nconst re = new RegExp(`${importRe.source}${simpleFromRe.source}`, 'gm')\n\nconst getRes = (fromSeg, quotes, src, importSeg, defName, varName) => {\n  const r = replaceRequire(fromSeg, quotes, src)\n  const { length } = importSeg.split('\\n')\n  const ws = '\\n'.repeat(length - 1)\n  let c\n  if (defName) {\n    c = `${ws}let ${varName} = ${defName}${r} ${makeDefaultIf(defName)}`\n  } else {\n    c = `${ws}const ${varName}${r}`\n  }\n  return c\n}\n\nexport const advancedImportAs =\n{\n  re: advancedRe,\n  replacement(match, importSeg, defName, varName, fromSeg, sd, ld) {\n    const { src, quotes } = getSrcFromMarkers(sd, ld, this)\n    const res = getRes(fromSeg, quotes, src, importSeg, defName, varName)\n    return res\n  },\n}\n\nconst importAs =\n{\n  re,\n  replacement(match, importSeg, defName, varName, fromSeg, quotes, src) {\n    const res = getRes(fromSeg, quotes, src, importSeg, defName, varName)\n    return res\n  },\n}\n\nexport default importAs\n"]}